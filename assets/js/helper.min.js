var tableHelper={internalTableSelector:!1,init:function(e){tableHelper.internalTableSelector=e},addTableRow:function(){$(tableHelper.internalTableSelector).append('<tr><td><input type="text" class="form-control" name="people[][firstname]" value=""/></td><td><input type="text" class="form-control" name="people[][surname]" value=""/></td><td class="options"><a class="deleteRow" href="#" title="Delete this row">Delete</a></td></tr>'),tableHelper.registerOptionsToTable()},addTableRowModal:function(e){$(e).append('<tr><td><input type="text" class="form-control" name="options[][label]" value=""/></td><td><input type="text" class="form-control" name="options[][name]" value=""/></td><td><select class="form-control" name="options[][type]"><option value="text">Normal string</option><option value="email">String (E-Mail Format)</option><option value="numeric">Integer</option></select></td><td class="options"><a class="deleteRowModal" href="#" title="Delete this row">Delete</a></td></tr>'),tableHelper.registerOptionsToTableModal()},tableExpanded:!1,registerOptionsToTable:function(){tableHelper.tableExpanded||(tableHelper.tableExpanded=!0,$(tableHelper.internalTableSelector+" tr:first").append("<th>Options</th>"),$(tableHelper.internalTableSelector+" tr:not(:first)").append('<td class="options"><a class="deleteRow" href="#" title="Delete this row">Delete</a></td>')),$(".deleteRow").on("click",function(){var e=$(this);$(e).closest("tr").remove()})},tableModalExpanded:!1,registerOptionsToTableModal:function(){tableHelper.tableModalExpanded||(tableHelper.tableModalExpanded=!0,$(".modalTable tr:first").append("<th>Options</th>"),$(".modalTable tr:not(:first)").append('<td class="options"><a class="deleteRowModal" href="#" title="Delete this row">Delete</a></td>')),$(".deleteRowModal").on("click",function(){var e=$(this);$(e).closest("tr").remove()})},getTableHeader:function(){return $.ajax({url:"/listStructure",data:{format:"json"},async:!1,dataType:"json",success:function(e){return e},error:function(){}}).responseJSON},getTableContent:function(){return $.ajax({url:"/listContent",data:{format:"json"},async:!1,dataType:"json",success:function(e){return e},error:function(){}}).responseJSON},buildTable:function(){var e=tableHelper.getTableHeader();if("undefined"!=typeof e){for(var t in e)$(tableHelper.internalTableSelector+" .tableHeader").append("<th>"+e[t].label+"</th>");var a=tableHelper.getTableContent();if("undefined"!=typeof a){for(var l in a){$(tableHelper.internalTableSelector).append('<tr class="people-'+l+'"></tr>');for(var t in e){var o=e[t].name,n=e[t].label,r=e[t].type,i=a[l][o];"undefined"==typeof i&&(i=""),$(tableHelper.internalTableSelector+" tr[class=people-"+l+"]").append('<td><input type="'+r+'" class="form-control" name="people[]['+o+']" placeholder="'+n+'" value="'+i+'"/></td>')}}tableHelper.registerOptionsToTable()}}},generateModal:function(){$(".modal-tableStructure .modal-body").html('<table class="table modalTable table-bordered table-responsive"><tr><th>Field Label</th><th>Field Name</th><th>Field Type</th></tr></table>');var e=tableHelper.getTableHeader();if("undefined"!=typeof e){for(var t in e)$(".modal-tableStructure .modal-body table").append('<tr><td><input type="text" name="options[][label]" class="form-control" value="'+e[t].label+'"></td><td><input type="text" name="options[][name]" class="form-control" value="'+e[t].name+'"></td><td><select class="form-control" name="options[][type]"><option value="text">Normal string</option><option value="email">String (E-Mail Format)</option><option value="numeric">Integer</option></select></td></tr>');tableHelper.registerOptionsToTableModal()}$(".modal-tableStructure").modal()}};$(document).ready(function(){tableHelper.init(".people"),tableHelper.buildTable(),$(".addTableRow").on("click",function(){tableHelper.addTableRow()}),$(".addRowModal").on("click",function(){tableHelper.addTableRowModal(".modalTable")}),$(".editTableStructure").on("click",function(){tableHelper.generateModal()});var e=window.location.pathname;("/save"===e||"/saveTableStructure"===e)&&($("#message").attr("class","").html("Successfully saved").addClass("message-success").fadeIn(),setTimeout(function(){$("#message").fadeOut()},2e3))});